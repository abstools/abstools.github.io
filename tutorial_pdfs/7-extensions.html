<h3>7 Extensions</h3>
<h4>7.1 Pluggable Type System</h4>
All declarations (fields, methods, classes, interfaces) in ABS can carry annota-
tions. These are simply expressions that are enclosed in square brackets. The
location type system in Sect. 6.4 provided examples. Other annotations can be
logical expressions that are used as assertions, contracts, or invariants during
verification or runtime assertion checking. This goes beyond this tutorial.
The location types are a so-called pluggable type system. Such type systems
can be realized easily in ABS via meta annotations. The special annotation
[TypeAnnotation] declares the data type definition immediately following it to be
a definition for type annotations and makes the parser aware of it. For example,
the location type system is declared as follows:
<pre>[TypeAnnotation]
data LocationType = Far | Near | Somewhere | Infer;
// usage
[LocationType: Near] T n;</pre>
<h4>7.2 Foreign Language Interface</h4>
As a modeling language ABS does not contain mechanisms for I/O, because
these are typically implementation-dependent. Of course, one often would like
to have some output from the execution of an ABS model. This is possible with
a general foreign language interface (FLI) mechanism that not only can be used
to implement I/O for ABS, but to connect ABS models with legacy code in
implementation languages in general. At the moment, the ABS FLI is realized
for the Java language. An ABS class that is to be implemented in Java needs
three ingredients:
<ol>
	<li>import of helper functions and classes from the module ABS.FLI;</li>
	<li>declaration as being foreign by the annotation [Foreign];</li>
	<li>default ABS implementations of all interface methods.</li>
</ol>
A simple example can look as follows:
<pre>import * from ABS.FLI;
interface Hello { String hello(String msg); }
[Foreign]
class HelloImpl implements Hello {
   String hello(String msg) { return "default implementation"; }
}
{
   Hello h = new HelloImpl();
   h.hello("Hi there");
}</pre>
The default implementation is used for simulation of ABS code without Java.
It is now possible to implement a Java version of the HelloImpl class in a Java
project and to connect that project with ABS. The details of how this is done
are explained at the HATS tools site. Basically, one extends the Java class
HelloImpl_c that was generated by the ABS Java backend with a new imple-
mentation of the Java method hello(String). By convention, the Java methods
carry the prefix fli.
<pre>import abs.backend.java.lib.types.ABSString;
import abs.backend.java.lib.runtime.FLIHelper;
import Test.HelloImpl_c;
public class HelloImpl_fli extends HelloImpl_c {
   @Override
   public ABSString fli_hello(ABSString msg) {
      FLIHelper.println("I got "+msg.getString()+" from ABS");
      return ABSString.fromString("Hello ABS, this is Java");
   }
}</pre>
On the Java side any Java construct can be used. ABS provides a Java
package abs.backend.java.lib.types containing declarations of the built-in
ABS types usable in Java such as ABSString.
Execution of the ABS main block above will now cause the Java output “I
got Hi there from ABS” to be printed on the system console.

<a href="fig11.png"><img src="fig11-354x154.png" alt="fig11-354x154" width="354" height="154" class="alignnone size-medium wp-image-771" /></a>

<strong>Fig. 11.</strong> Product line engineering

&nbsp;

<center><a href="http://www.abs-models.org/?page_id=664">Prev</a> | <a href="http://www.abs-models.org/?page_id=668">Next</a></center>